
<style>
    /* Ensure that the text is displayed in uppercase */
    input[type="text"] {
        text-transform: uppercase;
    }
</style>
<script>
    function formatItemID(input) {
        const value = input.value.toUpperCase();
        const validItemIDPattern = /^[A-Z]{1,3}-?[0-9]{0,3}$/;
    
        if (validItemIDPattern.test(value)) {
        
            if (value.length === 3 && !value.includes("-")) {
                input.value = value + "-";
            } else {
                input.value = value;
            }
            if (input.value.length === 7) {
                document.getElementById("shelf").focus();
            }
        } else {
            const lastValidValue = value.slice(0, -1);
            input.value = lastValidValue;
        }
        checkFormCompletion();
    }

    function formatShelf(input) {
        input.value = input.value.toUpperCase();
        checkFormCompletion();
    }
    function handleKeydown(event) {
        const input = event.target;
        const value = input.value;
        
        if (event.key === "Backspace" && value.charAt(3) === "-" && input.selectionStart === 4) {
            event.preventDefault();
            
            input.value = value.substring(0, 2);
        }
    }
    function checkFormCompletion() {
        const itemID = document.getElementById("item_id").value;
        const shelf = document.getElementById("shelf").value;
        const submitButton = document.getElementById("submit-button");

        const itemIDPattern = /^[A-Z]{3}-[0-9]{3}$/;
        const shelfPattern = /^[A-Z0-9]+$/;
    
        if (itemIDPattern.test(itemID) && shelfPattern.test(shelf)) {
            submitButton.disabled = false;
        } else {
            submitButton.disabled = true;
        }
    }
    document.addEventListener("DOMContentLoaded", function() {
        const submitButton = document.getElementById("submit-button");
        submitButton.disabled = true;

        document.getElementById("item_id").focus();
    });
</script>
<h2 class="text-center">Assign Item to Shelf</h2>
<form action="/item-move-submit" method="POST" class="bg-white w-50 mx-auto p-4 rounded shadow">
    <div class="form-group mb-3">
        <label for="item_id">Item ID (e.g., ABC-123):</label>
        <input type="text" id="item_id" name="item_id" maxlength="7" 
               class="form-control" 
               oninput="formatItemID(this)" 
               onkeydown="handleKeydown(event)" 
               required autocomplete="off">
    </div>
    <div class="form-group mb-3">
        <label for="shelf">Shelf (e.g., A1):</label>
        <input type="text" id="shelf" name="shelf" maxlength="10" 
               class="form-control" 
               oninput="formatShelf(this)" 
               required autocomplete="off">
    </div>
    <div class="text-center">
        <button type="submit" id="submit-button" class="btn btn-success" disabled>OK</button>
    </div>
</form>

